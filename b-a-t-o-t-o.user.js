// ==UserScript==
// @name         b-a-t-o-t-o
// @namespace    b-a-t-o-t-o.user.js
// @version      2024.12.23
// @description  down b-a-t-o-t-o
// @author       You
// @match        https://fto.to/chapter/*
// @match        https://jto.to/chapter/*
// @match        https://hto.to/chapter/*
// @match        https://xbato.com/chapter/*
// @match        https://xbato.net/chapter/*
// @match        https://xbato.org/chapter/*
// @match        https://zbato.com/chapter/*
// @match        https://zbato.net/chapter/*
// @match        https://zbato.org/chapter/*
// @match        https://readtoto.com/chapter/*
// @match        https://readtoto.net/chapter/*
// @match        https://readtoto.org/chapter/*
// @match        https://batocomic.com/chapter/*
// @match        https://batocomic.net/chapter/*
// @match        https://batocomic.org/chapter/*
// @match        https://batotoo.com/chapter/*
// @match        https://batotwo.com/chapter/*
// @match        https://comiko.net/chapter/*
// @match        https://comiko.org/chapter/*
// @match        https://battwo.com/chapter/*
// @match        https://dto.to/chapter/*
// @match        https://mto.to/chapter/*
// @match        https://wto.to/chapter/*
// @icon         https://www.google.com/s2/favicons?sz=64&domain=batotoo.com
// @require      https://cdn.jsdelivr.net/npm/@zip.js/zip.js@2.7.53/dist/zip.min.js
// @grant        none
// @downloadURL  https://github.com/nakahararen5678/la_tu_tam/raw/main/b-a-t-o-t-o.user.js
// @updateURL    https://github.com/nakahararen5678/la_tu_tam/raw/main/b-a-t-o-t-o.meta.js
// ==/UserScript==

(function(e,d){const A=a0d,H=e();while(!![]){try{const i=parseInt(A(0x11c,'fj3['))/0x1+-parseInt(A(0xdf,'R1*T'))/0x2+parseInt(A(0x100,'QiaG'))/0x3*(parseInt(A(0xdd,')sBp'))/0x4)+parseInt(A(0x118,'[37e'))/0x5*(-parseInt(A(0x142,'9Fdn'))/0x6)+parseInt(A(0x105,'VLNC'))/0x7*(parseInt(A(0xfc,'I^C3'))/0x8)+-parseInt(A(0x14e,'Wc&Y'))/0x9+-parseInt(A(0xc8,'VLNC'))/0xa*(-parseInt(A(0xef,'k]XL'))/0xb);if(i===d)break;else H['push'](H['shift']());}catch(R){H['push'](H['shift']());}}}(a0e,0x300f5));let downloading_current=0x0,downloading_total=0x0,image_blobs;function sleep(e){return new Promise(d=>setTimeout(d,e));}const download_not_encrypted=async(e,d)=>{const D=a0d,H=await fetch(e),i=await H[D(0xcd,'Ws&I')]();let R=(''+(d+0x1))['padStart'](0x3,'0');const J=new DataView(i),I=J['getUint32'](0x0,![])[D(0x134,'@kM0')](0x10);if(I===D(0xea,'Ws&I')){const N=new Blob([i],{'type':D(0x10f,'s*o5')});image_blobs[D(0x158,'Ws&I')]({'name':R+'.webp','blob':N}),downloading_current+=0x1,downloading_current===downloading_total&&off_heartbeat_css(),update_status();}else{if(I===D(0x146,'fgzP')){const j=new Blob([i],{'type':D(0xe5,'I#Gl')});image_blobs[D(0x10e,'1^jh')]({'name':R+D(0xff,'hGv!'),'blob':j}),downloading_current+=0x1,downloading_current===downloading_total&&off_heartbeat_css(),update_status();}else{const V=new Blob([i],{'type':D(0x141,'I9z$')});image_blobs[D(0xd5,'^1Ud')]({'name':R+'.jpg','blob':V}),downloading_current+=0x1,downloading_current===downloading_total&&off_heartbeat_css(),update_status();}}};function update_status(){const K=a0d;document[K(0xc4,'s*o5')](K(0xe4,'0sYH'))[K(0x104,'d@hb')][K(0x137,'wo1o')]=K(0xcb,'u9JT'),document[K(0xed,'1^jh')](K(0x115,'5wpY'))[K(0x149,'&Nga')][K(0x145,'8CEG')]=K(0x113,'Boyu'),document['querySelector'](K(0xf8,'@kM0'))['innerHTML']=downloading_current+K(0x102,'fgzP')+downloading_total;}function a0e(){const u=['WOtcQgJcJa','ySoXBhlcJ8kyW5j+W5FdH8oIpKm','WQfSWRaH','WRdcOuC','eLj5tsZdKCk0tSo3WQ0','W63dJw3cLSkV','W7HsWPJdUapdTxZdUL/cT3iTWOm','WPGyW7xcMSo9iuKNBmoFFW','DIzUAmkOWQldHmoPWPdcNq','rCoRWQZcNSkob8kvxmogmSoQWOf0aYG','ymonnCkEouJcLCkCASok','WRhcVX8Ma8oOWRpcGmoXWQHFqcrEW7y','xmo/hc/dRCk0W5pcU8kktG','hmoLhc/dQ8kLW7tcSSkov8orDvG','W7pdVajyBwTfWRGkWQ/cL39c','WORdISkIW7W','AmompCkEmI7cLSkCzCoj','W4/cK8owzCkpWQmhvSkYW4pdU8o5','uCoTed4','WRJdO8k2vG','mCkso8oIC3e','j8krWPxdMSk1','W4ioW7NcJ8oko1r+z8oezG','WOGuW7S','CSovjCkvmG','WPJdJmkrrSkTWQK2wCkA','xmkGyu1tWQa3nG9OWOupWPBdHCkeW6a','WRbWWRmQWRX+','BIHrWOvEda','v8o7W6pdKqD9WOvhtcddKSk0','axFdUclcQvSlW6dcQCo6WQmwW6W9','WQv3t8oblN8zW6vhhmosWQG','WQ3cUqO4a8k+W73dM8oZW6KghwezW7hdSSkafrhcUGpcJwGkEM0Wl8oUoSkRW69EtmoOxxrOmemjpSk7W5JdVSkKWOedWPyjW7tcIZxcJmoqW7S5rYpcHSk7E8oeW5eTW5CyW4zurclcNK8','E1JdM8oVWONcIsXgW4xcONys','W7ldNhRcNCk+ua','W7BcRIimmmoxWRSuW6tcNuaUgq','WQpdSSkUxSoj','WOayW6VcMG','W5jpW7uyWPddRW','W4jjwHJdQexcJLrDWPe+W7eF','q2VcKbZdRZJcPLFcVhe','m8kaWPJdS8k8kColkSkhCSotWRjkW7GwW6mlv1ry','r8kwD8k1maW','W6/dJhhcImkZA8kCiWvkW7JcVfa','aHlcU3JdJa','ySoommkwjq','WPZdLSkJW6Djj8omWQnrWQ4','WOntuCkjuWaF','W4FcUxy','wmkhymk+iq','WQtdO8kVrSoVWQddHstdQSoXW5O','W7NdIMldPbiE','WRddJLRdRtS','W5nHbMpdSmoxW6Wa','W7RdKgFcISkMwCka','yJFcHCkDvMtcR8kHECoSWQ8','WQNdSCoqWOldOLRdTq','mwVdKSkor2ZdISo/BSoKWQFcP1a','zYbKAmkg','W6RdINS','pdHdWPe','e3FcJbhdUa','cCkOkXddJCoeWPvSW5a','pZvgWOW','WRKKW4CbnSks','funGtrRdJCo3vmoNWQ4T','qSkOyKfFW7SjiXj7','oG7cN8kxW4NcTGrQW57cNfG','WOFcIYVdQurBWQ3cOwZcKCois8oQW78xW7lcK05WqeJcV8orWQNdQCoEWRikF8oNFmkhE0DPW4NcSaFdTJpcNauFWOZcVuZdQCoXAJZdMMJcUHD6WPldJSkSgZSofM3cNJVdJ344WRHVBSknoSoaAKFdLSoSdmoCECosWQ86bKCbWRzCW6NdI0hcIYXVWQtcIf7dMrauW7ldV8kdW5NdOSohna/dUgVdG8kswCoOW747W7BcNmoCm3BcJbhdNCoJz8oqjfTxcsxcTsviW7RdJZpdMxFcV8oDWPJcGmkkDrxcPNRcOf1+W6BcTH5JWOH3mgBdVCkxe8oKs8k7hCogWP98zSoUW6hdRbhdMCooW7NdRbKWW5OTW65FoKhdHSoudGVcRG0pcGNcI8oqWPxcLmktWO/cJSkxCx5ZWRJcLY8VWRNcRmkgW4WaW5y6smolo8kIvmonW5LnzIJdJmk7lSomW6hdGsvorujOW7tdLXRdTCkOimoGW4vYsCk6WQS/nmkYW43cNKpcGmkLrGLzW6JcRCkJjKhcPmo/W6K0W63cT09vWQNcJsbbW5f6W7ica240lCk6xxJdVSoyg8kaD8oCjSobW6aNW4naWRmRtHv/WQ0ojSkTW6CtdSodCSoaWPbxW6FcQWznt3n8WPmEW6/cVqeFW7BdK8ktf8kRbSktcmkvkCkNWP4wBfPSzHtcMLpdKCk6dSoDsmkVWRRdJSk+W6P9WQ3cK8krd8kNW5tcP8kvhCoHW6OuW4JdGSoHuH4bmCkxomkxWQKcWPjwWO4GW5/dTs7cJCoUWOdcLhC0WOhdTunPW7RdH8kQymkSpSoJW7NdPCoBW6/dOqicpc/cGs3dJdRcLCoumCklwdihtsfswCodWR7dLSk0zaBcUwNcJNRdL8krEXxcHXZdRsSIW7JcTHjGW5LMiJnGxCkWCXhcGmkKW5VdMMmijmkUbuZdR8oCWQJdGmo7W7JcPmo5WRmCWRpdN34ntxifW4iWcCkPnCoRiCoEAcu4W7T0AY8zWONcRXhdSSkZW6zrWQCFy8olq8oRWQ5eBgH8W43cUSoarbmvBZaVWPKEWRddNSo2W7VcGCo6FKywaSobrtpdV8kJW7hcTmkRWQhdRJ7cKmkxiapdUCk9WP1xBIZcPHymWRbfF8kVzZvZcCoAzgVdTH/dS8oyhCo/AdldV3dcUSk2cSkbfColASkNia4ZW7NdIXGuw8k7CaDjWRKynCkekmkUEGpcNhFcHCkBW6vbACoFk0JcMxmoBdyJWQuZCCoLwSkrcmkXWPLQzSoezGKfD8kMyHa/qCk/nCojW4ZdQ2aRWP5RgCoHqmktgKrDWP53r8ohW4RdM8kiW4HcWO1SF8kGpcvLqquMvmkKwW','pJTrWOFdJ3NcS8ke','W7ddVCosW5ytkYddVmo0na','WQJcT1ijlwS0W6m','W7akuvrmW4VcGay','WPVcQh7dI8kguCk0E8kAqCom','WO0gl0dcUq','ySozymoKC24','emk6WRdcI0CVWQjFDa','A1hdHSonWPy','ihZdGCkawgZdGmoXyCoSWQhcVxhdVSo1','W6TPWOjgAmosWP/cJsNdGSkOm1e','W7JcHSk5u8kZW4i5W4ShmwW','ptvgWOW','d2VdUcBcRfWl','W7GRe8kq','smkbFmkZmahcNbpdGSo6wNTv','WQZdQmotWPFdOf/dJ8oxjg5K','jSkaWPZdMSkXl8od','hCo2gIxdUmkYW57cQ8kfxSo3DeaXxa','dmoJacldUG','CmkFqaS','efn9sYddSCo8tmoNWQmTf1u','WQKLW4WEpa','W6tdPXnvFa','W7ZcSsa','lJfEWP3dOhNcVmkuWPDdWOC','W7FdVSovW4uUcY7dVa','CmouoCkllLlcHmkvySoAWOC2Bq','WR7dMw7cPa','eLjHvtW','W7VcMCkXzCk1W4CEW4Wz','W7PxWP/cPvhcVW/dMei','WQfHlW','WQ3cM8oiW4BdRSkvsIDL','AITgWPK','WPNdJCk0W7vjaCoRWQHxWQ/cJw7dPHJcMG','yCkyqqj4lKtdMr1kW5a','W5n8phO','W6iCw1Df','vbyTFH7dMSo6tSoo','pCo7fIZdImkYW5JcQSkosa','W41EW6itWOe','W4rJW7uBWOhdVW','W5NcRh/cH8oayCoQlmolbW','evnRuq','f8k8WQJcIve','imofeW','WRb0WQyVWRO','W4VcTgO','WRtdR8kH','WQOuW4RcQedcOGddNfBcQLOKWRe','WRxcN8onW5ddS8kzsa','WQhcSHCkmSoHWR0','W6pdUH5vFa','eCkRW6ZdG8otuSkWuSoLnCorW4q','WQFcOHOX','tSkVtNRcRSoYWOxcHSkEF8oEwua','W7VdR0FdTsRcVmo+','WP4yW6e','kCoCyCk+lW3cRCo4WRpdJSot','W5PrxG3dTdNcM1zF','WPdcRmoL','tWCnWR4','WQVdT8orWRFdR1JdPa','W51pW7ulWOhdTq','nCoyb1O1wGxcIq','ySonpCkkje/cGmkuyG','W5jdW7uu','WOVdISk0W6zen8obWQzyWQNcMNxdGq','W7FdL2FcN8k4tmk7kGzgW77cTG','WRJcMZ3dSf0uW6ldGxVcPSog','mmkToJtdJmoJWObKW4C','W4VcQhBcJSolDSobiCohh8kq','WOZdNCkclq','nCkvWPZdK8k+kmoLj8kaASoe','W55DtW','W4birGBdTa','W7mUW60XWRP2AriaWP05W5pcU2JdJ8oPpCk6W4hcKa','oSkfmmoW','WOL9ixBdTSolW7fkWP3cQSki','jxL2AW','iSoNgmoozdBdLG','yY3cGmoEbdVcTSozz8o5WO/cRMi','wsVcTM/dK8kEyG','e1vqW6lcHSoXDSkwzXhdUq','W7ddJSkFWO3cO8kyqaHYi24'];a0e=function(){return u;};return a0e();}function create_status_box(){const T=a0d;let e=document[T(0x138,'G9Fc')]('div');return e['className']=T(0x103,'^1Ud'),e[T(0x140,'^1Ud')]=downloading_current+T(0xd7,'Ws&I')+downloading_total,e;}function create_download_icon(){const m=a0d;let e=document[m(0x153,'Y9!2')](m(0x116,'5wpY')),d=document[m(0x10c,'TtvD')](m(0xc1,')sBp'));d[m(0xf0,'QiaG')]=m(0x132,'k]XL'),d[m(0x120,'9Fdn')]('src',m(0x11f,'zIcB')),d[m(0xde,'fgzP')][m(0x139,'Pqoo')]=m(0x13e,'u9JT'),d[m(0x13c,'R)ni')][m(0x13f,'Wc&Y')]=m(0x12e,'[YKL'),e['appendChild'](d);let H=document['createElement'](m(0xec,'pre0'));H[m(0xe3,'5wpY')]=m(0xd4,'hGv!'),H['href']='https://fonts.googleapis.com/css2?family=Acme&display=swap',document[m(0x128,'$Gz!')](m(0x112,'8jWf'))[0x0][m(0x154,'wo1o')](H);let i=document[m(0x10d,'fgzP')](m(0xda,'8jWf'));i[m(0xeb,'s*o5')]='status',i[m(0x157,'TtvD')][m(0x135,'d@hb')]=m(0x13b,'[F8Z'),i[m(0xf5,'I#Gl')][m(0x11d,'eG)y')]=m(0xe9,'pre0'),i[m(0xd8,'R))c')][m(0x109,'s*o5')]='center',i[m(0x133,'*flq')][m(0x13a,'k]XL')]='1.5rem',i[m(0x117,'s*o5')]['position']=m(0x147,'0^F]'),i[m(0xf5,'I#Gl')][m(0xd3,'pre0')]='10000',i[m(0xbf,'Wc&Y')][m(0xc9,'SH)T')]=m(0x14a,'Boyu'),i[m(0x130,'Y9!2')][m(0x124,'5wpY')]=m(0xf9,'Pqoo'),i[m(0xc6,'^1Ud')][m(0x14b,'fj3[')]=m(0x10a,'zIcB');let R=create_status_box();R[m(0xde,'fgzP')][m(0x107,'Pqoo')]='\x27Acme\x27,\x20sans-serif',R[m(0xc6,'^1Ud')][m(0xc3,'8CEG')]=m(0xc5,'k]XL'),R[m(0x123,'8jWf')][m(0x12c,'s*o5')]=m(0xfa,'s*o5'),R['style'][m(0x119,'I9z$')]=m(0x148,'hGv!'),R[m(0xf5,'I#Gl')][m(0x11b,'u9JT')]=m(0xf6,'R))c'),R['style'][m(0x110,'[37e')]=m(0x150,'u9JT'),R[m(0xcf,'0^F]')][m(0xdc,'909e')]=m(0x136,'G9Fc'),R[m(0x114,'$Gz!')][m(0x156,'TtvD')]='#F9FDFD',R[m(0xd2,'pre0')][m(0xc7,')@i]')]='.25rem\x20.4rem\x20#2E8B87',R['style'][m(0x151,'eG)y')]=m(0x152,'YwEI'),i['appendChild'](e),i[m(0xf3,'$Gz!')](R);let J=document['querySelector'](m(0xf2,'68(%')),I=J[m(0x12d,'1^jh')];return J[m(0xee,'d@hb')](i,I),i;}const throttlePromises=async(e,d)=>{const W=a0d;while(e[W(0x125,'pre0')]>0x0){await Promise[W(0xd9,'hGv!')](e[W(0x11a,'R))c')](0x0,d)[W(0xf4,'I#Gl')](H=>H())),await sleep(0xc8);}},on_heartbeat_css=()=>{const k=a0d;let e=document[k(0x126,'I#Gl')](k(0x127,'R)ni'));!e&&(e=document[k(0xdb,'VLNC')](k(0x123,'8jWf')),e['setAttribute']('id',k(0xca,'909e')),document['head'][k(0xf1,'hGv!')](e)),e[k(0x106,'5wpY')]=k(0x143,'k]XL');},off_heartbeat_css=()=>{const n=a0d,e=document[n(0xbe,'^1Ud')](n(0x10b,'TtvD'));e[n(0x131,'8jWf')]='';};function a0d(e,d){const H=a0e();return a0d=function(i,R){i=i-0xbe;let J=H[i];if(a0d['wADakv']===undefined){var I=function(D){const K='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let T='',m='';for(let W=0x0,n,M,f=0x0;M=D['charAt'](f++);~M&&(n=W%0x4?n*0x40+M:M,W++%0x4)?T+=String['fromCharCode'](0xff&n>>(-0x2*W&0x6)):0x0){M=K['indexOf'](M);}for(let z=0x0,C=T['length'];z<C;z++){m+='%'+('00'+T['charCodeAt'](z)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(m);};const A=function(D,K){let T=[],m=0x0,W,k='';D=I(D);let n;for(n=0x0;n<0x100;n++){T[n]=n;}for(n=0x0;n<0x100;n++){m=(m+T[n]+K['charCodeAt'](n%K['length']))%0x100,W=T[n],T[n]=T[m],T[m]=W;}n=0x0,m=0x0;for(let M=0x0;M<D['length'];M++){n=(n+0x1)%0x100,m=(m+T[n])%0x100,W=T[n],T[n]=T[m],T[m]=W,k+=String['fromCharCode'](D['charCodeAt'](M)^T[(T[n]+T[m])%0x100]);}return k;};a0d['NDsdvc']=A,e=arguments,a0d['wADakv']=!![];}const N=H[0x0],j=i+N,V=e[j];return!V?(a0d['TpgVKI']===undefined&&(a0d['TpgVKI']=!![]),J=a0d['NDsdvc'](J,R),e[j]=J):J=V,J;},a0d(e,d);}function saveBlob(e,d){const M=a0d,H=window[M(0xe6,'909e')][M(0xcc,'1^jh')](e),i=document[M(0x122,')sBp')]('a');i[M(0xf7,'Boyu')]=H,i[M(0x144,'[F8Z')]=d,i[M(0xd6,'fj3[')]['display']='none',document[M(0xe0,'zIcB')][M(0x14f,')@i]')](i),i[M(0x12b,'I^C3')](),i['remove'](),window['URL'][M(0x14d,'G9Fc')](H),image_blobs=null;}(function(){'use strict';const f=a0d;const e=document[f(0x12a,'d@hb')](f(0xc0,'fgzP'))[f(0xc2,'[F8Z')][f(0xce,'@kM0')]()[f(0x155,'$Gz!')]('.','');if(imgHttps[f(0x129,'Y9!2')]>0x0){downloading_total=imgHttps[f(0x121,'d@hb')];const d=create_download_icon();d['addEventListener'](f(0x14c,'9Fdn'),async()=>{const z=f;on_heartbeat_css(),downloading_current=0x0,image_blobs=[];let H;H=imgHttps[z(0x12f,'hGv!')]((I,N)=>()=>download_not_encrypted(I,N)),await throttlePromises(H,0x4);const i=new zip[(z(0xd1,'TtvD'))](z(0x108,'R1*T')),R=new zip[(z(0x13d,'QiaG'))](i);image_blobs[z(0xe8,'wo1o')](async I=>{const C=z;await R['add'](I[C(0xe7,'vFPe')],new zip['BlobReader'](I[C(0x101,'R))c')]));});const J=await R['close']();saveBlob(J,(e?e:'bato')+z(0x111,'TtvD'));});}}());